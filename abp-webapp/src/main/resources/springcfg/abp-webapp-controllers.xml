<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="            http://www.springframework.org/schema/beans            http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">


<bean class="com.aircell.abp.model.ApplicationState" lazy-init="true">
	<property name="stateName" value="state" />
	<property name="domainName" value="${airborne.domain}" />
	<property name="staticWebPath" value="/${static-webapp.path}" />
	<property name="springWebPath" value="${gbp-webapp.path}" />
	<property name="jahiaWebPath" value="${gbp-webapp.jahia.path}" />
	<property name="jahiaVirtualSite" value="${gbp-webapp.jahia.virtualSite}" />
	<property name="home" value="http://${gbp-webapp.hostandpath}/splash.do" />
	<property name="gbpTrackingPath" value="/${static-webapp.path}${gbp-webapp.tracking.path}" />
	<property name="gbpTrackingUrl" value="${gbp-webapp.tracking.url}" />
	<property name="ampTrackingPath" value="/${static-webapp.path}${gbp-webapp.amp.tracking.path}" />
	<property name="ampTrackingUrl" value="${gbp-webapp.amp.tracking.url}" />
</bean>

<!-- *********************************************************** -->
<!-- ******************* I18N configuration ******************** -->
<!--  ********************************************************** -->
<!-- interceptor which allows changing locale with every request -->
  <bean id="localeChangeInterceptor" class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
    <property name="paramName" value="locale"/>
  </bean>
  <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basenames">
      <list>
        <value>messages/format</value>
        <value>messages/errors</value>
        <value>messages/messages</value>
      </list>
    </property>
  </bean>
  <bean id="localeResolver" class="org.springframework.web.servlet.i18n.CookieLocaleResolver">
    <property name="cookieMaxAge" value="-1"/>
<!-- non persistent, session base cookie -->
  </bean>
  <bean id="paramResolver" class="org.springframework.web.servlet.mvc.multiaction.ParameterMethodNameResolver">
    <property name="paramName" value="method"/>
  </bean>
<!-- *********************************************************** -->
<!-- ************* MVC Controller Configuration **************** -->
<!-- *********************************************************** -->
  <bean id="simpleUrlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="interceptors">
      <list>
        <ref bean="localeChangeInterceptor"/>
      </list>
    </property>
    <property name="mappings">
      <props>
<!-- TODO: is this needed -->
        <prop key="/abp/statusTray.do">statusTrayPageController</prop>
        <!-- Commenting out /abp/page/start.do and abpMultiAirlineController bean, uncomment them for stubbed ABP build -->
        <!--<prop key="/abp/page/start.do">abpMultiAirlineController</prop>-->
        <prop key="/abp/page/abpDefault.do">abpDefaultController</prop>
        <!--  <prop key="/abp/page/abpDefault1.do">abpDefaultController1</prop> -->
           <prop key="/abp/page/abpRoaming.do">abpRoamingController</prop>
        <prop key="/abp/cookieError.do">cookiePageController</prop>
		<prop key="/abp/atgDownPg.do">atgDownPgController</prop>
        <prop key="/abp/page/connecting.do">connectingController</prop>
        <prop key="/abp/page/aaaActivate.do">aaaActivateController</prop>
        <prop key="/abp/page/aaaDeactivate.do">aaaDeactivateController</prop>
        <prop key="/abp/page/forbidden.do">blackListController</prop>
        <prop key="/abp/squidError.do">squidErrorController</prop>
          <prop key="/abp/techError.do">techErrorController</prop>
        <prop key="/abp/page/subscribersCap.do">subscribersCapController</prop>
<!-- *** form controllers *** -->
        <prop key="/abp/service/statusTray.do">statusTrayController</prop>
        <prop key="/abp/service/">statusTrayController</prop>
        <prop key="/abp/service/mediaList.do">mediaListController</prop>
        <prop key="/abp/service/userList.do">userListController</prop>
        <prop key="/abp/service/flightList.do">flightListController</prop>
      </props>
    </property>
    <property name="defaultHandler" value="abpDefaultController"/>
  </bean>
<!-- *** MVC Controllers - will be gotten rid of soon *** -->

<!-- *********************************************************** -->
<!-- ************* Page Controllers Configuaration ************* -->
<!-- *********************************************************** -->
 <!--  <bean id="abpDefaultController" class="com.aircell.abp.web.controller.ABPDefaultController">
    <property name="abpDefaultPg" value="http://${abp-webapp.host}/abp/connecting.jsp"/>
    <property name="ampDefaultPg" value="http://${abp-webapp.host}/abp/ampConnecting.jsp"/>
  </bean>-->
<!-- Commenting out abpMultiAirlineController bean, uncomment this bean for stubbed ABP build -->
<!--
  <bean id="abpMultiAirlineController" class="com.aircell.abp.web.controller.MultiAirlineController">
    <property name="abpDefaultPg" value="http://${abp-webapp.host}/abp/page/abpDefault.do"/>
    <property name="airlineInfo" ref="airlineInfoBean"/>

  </bean>
-->

    <bean id="connectingController" class="com.aircell.abp.web.controller.ConnectingController">
       <property name="abpDefaultPg" value="http://${abp-webapp.hostandproxypath}/page/abpDefault.do"/>
  </bean>

 <bean id="abpDefaultController" class="com.aircell.abp.web.controller.ABPDefaultController">
    <property name="abpDefaultPg" value="http://${abp-webapp.host}/abp/connecting.jsp"/>
    <property name="ampDefaultPg" value="http://${abp-webapp.host}/abp/ampConnecting.jsp"/>
    <property name="httpClientGbpPage" value="http://${gbp-webapp.hostandpath}/page/gbpBackChannel.do"/>
    <property name="paramName" value="method"/>
    <property name="methodName" value="retrieveGbpSessionId"/>
	<property name="deviceMethodName" value="retrieveUpdatedDeviceList"/>
	<property name="videoServiceMethodName" value="updateVideoAvailability"/>
    <property name="purchasePg" value="http://${gbp-webapp.hostandpath}/purchase1.do"/>
    <property name="splashPg" value="http://${gbp-webapp.hostandpath}/splash.do"/>
   <!-- <property name="goBrowsePg" value="http://${gbp-webapp.hostandpath}/gobrowse.do"/>-->
    <property name="atgDownPg" value="atgDownPg"/>
     <property name="kuDownPg" value="kuDownPg"/>
<!--    <property name="ampAtgDownPg" value="ampAtgDownPg"/>
    <property name="cookieErrorPage" value="http://${abp-webapp.host}/abp/cookieError.html" /> -->
    <property name="cookieErrorPage" value="/abp/cookieError.do" />
    <property name="httpPostCookieName" value="JSESSIONID"/>
    <property name="httpPostDomain" value="${abp-webapp.host}"/>
    <property name="httpPath" value="/"/>
    <property name="cookieMaxAge" value="-1"/>
    <property name="cookieSecure" value="false"/>
    <property name="flight" ref="flight"/>
	 <property name="version" ref="versionBean"/>
    <property name="staticWebPath" value="${abp-webapp.library}" />
  </bean>

  <bean id="aaaActivateController" class="com.aircell.abp.web.controller.AAAActivateController">
     <property name="abpVersion" value="${abp-buildversion}"/>
    <property name="httpClientGbpPage" value="http://${gbp-webapp.hostandpath}/page/gbpBackChannel.do"/>
    <property name="gbpSetActiveServiceUrl" value="http://${gbp-webapp.hostandpath}/page/gbpBackChannel.do"/>
    <property name="sslCertStorePath" value="${ssl.cert.store}"/>
    <property name="paramName" value="method"/>
    <property name="methodName" value="retrieveUserInfo"/>
    <property name="methodNameActivation" value="setActiveService"/>
    <property name="methodNameActivationFailed" value="setActivateError"/>
    <property name="notAuthForward" value="redirect:/page/abpDefault.do"/>
    <property name="successView" value="redirect:http://${gbp-webapp.hostandpath}/gobrowse.do" />
    <property name="failureView" value="redirect:http://${gbp-webapp.hostandpath}/techError.do" />
    <property name="jsonSuccess" value="activateSuccess"/>
    <property name="jsonError" value="activateFailure"/>
    <property name="mobileError" value="redirect:http://${gbp-webapp.hostandpath}/techError.do"/>
    <property name="commandClass" value="com.aircell.abp.web.form.DummyCommand"/>
    <property name="commandName" value="activateCommand"/>
    <property name="httpPostCookieName" value="JSESSIONID"/>
    <property name="httpPostDomain" value="${abp-webapp.host}"/>
    <property name="httpPath" value="/"/>
    <property name="cookieMaxAge" value="-1"/>
    <property name="cookieSecure" value="false"/>
    <property name="flight" ref="flight"/>
    <property name="abpfailureView" value="redirect:http://${abp-webapp.hostandproxypath}/techError.do" />
  </bean>
  <bean id="aaaDeactivateController" class="com.aircell.abp.web.controller.AAADeactivateController">
    <property name="httpClientGbpPage" value="http://${gbp-webapp.hostandpath}/page/gbpBackChannel.do"/>
    <property name="sslCertStorePath" value="${ssl.cert.store}"/>
    <property name="paramName" value="method"/>
    <property name="methodName" value="deactivateUser"/>
    <property name="notAuthForward" value="redirect:/page/abpDefault.do"/>
    <property name="successView" value="redirect:http://${gbp-webapp.hostandpath}/splash.do"/>
    <property name="failureView" value="redirect:http://${gbp-webapp.hostandpath}/logoutDisplay.do"/>
    <property name="jsonSuccess" value="deactivateSuccess"/>
    <property name="jsonError" value="deactivateFailure"/>
    <property name="commandClass" value="com.aircell.abp.web.form.DummyCommand"/>
    <property name="commandName" value="activateCommand"/>
    <property name="httpPostCookieName" value="JSESSIONID"/>
    <property name="httpPostDomain" value="${abp-webapp.host}"/>
    <property name="httpPath" value="/"/>
    <property name="cookieMaxAge" value="-1"/>
    <property name="cookieSecure" value="false"/>
  </bean>
  <bean id="blackListController" class="com.aircell.abp.web.controller.AircellParameterizableViewController">
  	<property name="viewName" value="forbiddenSite"/>
  	 <property name="mobileView" value="ampForbiddenSite"/>
  	 <property name="flight" ref="flight"/>
  </bean>
<!-- *********************************************************** -->
<!-- ************* Form Controllers Configuaration ************* -->
  <bean id="statusTrayController" class="com.aircell.abp.web.controller.StatusTrayController">
    <property name="successView" value="statusTraySuccess"/>
    <property name="failureView" value="statusTrayFailure"/>
    <property name="commandClass" value="com.aircell.abp.web.form.StatusTrayCommand"/>
    <property name="commandName" value="statusTrayCommand"/>
    <property name="sessionInfoService" ref="sessionInfoService"/>
    <property name="flight" ref="flight"/>
	<property name="flightGeistLibrary" ref="flightGeistLibrary" />
	<property name="httpClientGbpPage" value="http://${gbp-webapp.hostandpath}/page/gbpBackChannel.do"/>
	<property name="paramName" value="method"/>
	<property name="methodName" value="setGbpPrepareToAlertFlag"/>
	</bean>
  
   <bean id="flightListController" class="com.aircell.abp.web.controller.FlightListController">
    <property name="successView" value="flightListSuccess"/>
    <property name="failureView" value="flightListFailure"/>
    <property name="flight" ref="flight"/>
    <property name="commandClass" value="com.aircell.abp.web.form.DummyCommand"/>
    <property name="commandName" value="flightList"/>
  </bean>
  
  
   <bean id="mediaListController" class="com.aircell.abp.web.controller.MediaListController">
    <property name="successView" value="mediajsonsuccess"/>
    <property name="failureView" value="mediajsonfailure"/>
    <property name="jsonSuccess" value="mediajsonsuccess"/>
    <property name="jsonError" value="mediajsonfailure"/>
    <property name="jsonpSuccess" value="mediajsonpsuccess"/>
    <property name="jsonpError" value="mediajsonpfailure"/>
    <property name="xmlSuccess" value="mediaxmlsuccess"/>
    <property name="xmlError" value="mediaxmlfailure"/>
    <property name="commandClass" value="com.aircell.abp.web.form.DummyCommand"/>
    <property name="commandName" value="mediaListCommand"/>
    <property name="paramName" value="method"/>
	<property name="methodName" value="mediaListCheck"/>
    <property name="mediaListConfigPath" value="${media-list.file.path}"/>
  </bean>
   <bean id="absServiceHelper" class="com.aircell.abp.web.rest.AbsServiceHelper">
    <property name="flight" ref="flight"/>
	<property name="flightGeistLibrary" ref="flightGeistLibrary" />
	<property name="httpClientGbpPage" value="http://${gbp-webapp.hostandpath}/page/gbpBackChannel.do"/>
	<property name="paramName" value="method"/>
	<property name="methodName" value="setGbpPrepareToAlertFlag"/>
  </bean>

  <bean id="statusTrayPageController" class="com.aircell.abp.web.controller.StatusTrayPageController">
    <property name="viewName" value="statusTray"/>
     <property name="flight" ref="flight"/>
  </bean>
  <bean id="cookiePageController" class="com.aircell.abp.web.controller.CookieErrorController">
    <property name="viewName" value="cookieError"/>
     <property name="mobileView" value="ampCookieError"/>
     <property name="flight" ref="flight"/>
  </bean>

   <bean id="versionBean" class="com.aircell.abp.model.Version">
        <property name="abpVersionNo" value="${abp-buildversion}"/>
        <!--<property name="acpuVersion" value="1.0"/>-->
  </bean>

  <bean id="subscribersCapController" class="com.aircell.abp.web.controller.SubscribersCapController">
    <property name="successView" value="redirect:http://${gbp-webapp.hostandpath}/purchase2.do" />
    <property name="failureView" value="redirect:http://${gbp-webapp.hostandpath}/splash.do" />
    <property name="jsonSuccess" value="subscribersCapSuccess"/>
    <property name="jsonError" value="subscribersCapFailure"/>
    <property name="commandClass" value="com.aircell.abp.web.form.DummyCommand"/>
    <property name="commandName" value="subscribersCap"/>
    <property name="flight" ref="flight"/>
  </bean>
   <bean id="userListController" class="com.aircell.abp.web.controller.UserListController">
    <property name="successView" value="userJsonSuccess" />
    <property name="failureView" value="userJsonSuccess" />
    <property name="commandClass" value="com.aircell.abp.web.form.DummyCommand"/>
    <property name="commandName" value="userList"/>
  </bean>
    <bean id="techErrorController" class="com.aircell.abp.web.controller.TechnicalErrorController">
          <property name="viewName" value="techError"/>
		  <property name="mobileView" value="ampTechError"/>
          <property name="flight" ref="flight"/>
          <property name="abpWebappHome" value="${abp-webapp.hostandproxypath}"/>
          <property name="gbpWebappHome" value="${gbp-webapp.hostandpath}"/>
      </bean>
  
  <bean id="atgDownPgController" class="com.aircell.abp.web.controller.AtgDownPgController">
   		<property name="viewName" value="atgDownPg"/>
	    <property name="kuDownPg" value="kuDownPg"/>
	    <property name="flight" ref="flight"/>
  </bean>
  
   <bean id="abpRoamingController" class="com.aircell.abp.web.controller.ABPRoamingController">
  	<property name="httpClientGbpPage" value="http://${gbp-webapp.hostandpath}/page/gbpBackChannel.do"/>
  	<property name="paramName" value="method"/>
    <property name="methodName" value="retrieveGbpSessionId"/>
    <property name="httpPostCookieName" value="JSESSIONID"/>
	<property name="roamingView" value="roaming" />
	<property name="atgDownPg" value="atgDownPg"/>
	<property name="flight" ref="flight"/>
	<property name="version" ref="versionBean"/>
  </bean>
  <bean id="squidErrorController" class="com.aircell.abp.web.controller.SquidErrorController">
          <property name="viewName" value="squidError"/>
          <property name="flight" ref="flight"/>
  </bean>
  <!--  ********** Flight Geist Configuration ***************** -->
  <import resource="flight_geist.xml"/>
  <!--  ******************************************************* -->
</beans>
